<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="../script/Troca_Login.js"></script>
    <script defer src="https://unpkg.com/@phosphor-icons/web"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="shortcut icon" href="../img/img.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/Agendamento.css">
    <script src="../script/menu.js" defer></script>

    <title>Cortes</title>
</head>

<body>

    <header>
        <div class="conteiner-header">
            <div class="item">
                <img src="../img/img.jpg" alt="Barbearia" height="100px">
            </div>
            <div class="item">
                <nav class="menu">
                    <a href="../html/Home.html">Home</a>
                    <a href="../html/Produtos.html">Produtos</a>
                    <a href="../html/Servicos.html">ServiÃ§os</a>
                    <a href="../html/Agendamento.html">Agendamento</a>
                    <a href="../html/FullCalendar/index.html">Agendamento Funcionario</a>
                </nav>
            </div>

            <div class="containeravatar">
                <div class="user-avatar" id="user-avatar" onclick="toggleDropdown()">
                    <span id="user-initials"></span>
                    <div class="dropdown-content" id="dropdown-content" style="display: none;">
                        <p id="user-name"></p>

                        <hr>

                        <div class="menu-paginas">
                            <!-- Faz a mudanÃ§a de pagina o agendamentos-link -->
                            <a href="#" class="menu-item" id="agendamentos-link" >
                                <ion-icon name="calendar-outline"></ion-icon>
                                <div>
                                    <span>Agendamentos</span>
                                    <small>Seu histÃ³rico de agendamentos</small>
                                </div>
                            </a>
                            <a href="#" class="menu-item">
                                <ion-icon name="person-outline"></ion-icon>
                                <div>
                                    <span>Meus dados</span>
                                    <small>Seus dados pessoais</small>
                                </div>
                            </a>
                            <a href="#" class="menu-item">
                                <ion-icon name="lock-closed-outline"></ion-icon>
                                <div>
                                    <span>Alterar senha</span>
                                    <small>Gerencie a senha de sua conta</small>
                                </div>
                            </a>
                        </div>

                        <div class="social-buttons">
                            <a href="" class="social-button facebook" target="_blank">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="" class="social-button instagram" target="_blank">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="" class="social-button whatsapp" target="_blank">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        </div>

                        <button id="logout-button" onclick="logout()">Sair</button>
                    </div>
                </div>
            </div>

            <a id="agendamentos-link" href="./Contas/login.html">
                <button class="button-login">Entrar</button>
            </a>
        </div>
    </header>

    <main class="corpo-agendamento">
        <div class="AgendamentoResponsi">
            <ul class="agendamento">
                <li class="barber" onclick="handleBarberClick('m3FXSC4t8bBIBhJUDD5s')">
                    <h2>Lucas Ferreira</h2>
                    <img src="../img/anonimo.jpg" class="funcionario">
                    <p class="agendamento-descricao">Prefiro atender com o Lucas</p>
                </li>
                <li class="barber" onclick="handleBarberClick('xFBjnum08ucGkx8rdcg6')">
                    <h2>Kennedy Esquitini</h2>
                    <img src="../img/anonimo.jpg" class="funcionario">
                    <p class="agendamento-descricao">Prefiro atender com o Kennedy</p>
                </li>
                <li class="barber" onclick="handleBarberClick('MSol9Vb586vYSVzNKfsz')">
                    <h2>Gabriel Ferreira</h2>
                    <img src="../img/anonimo.jpg" class="funcionario">
                    <p class="agendamento-descricao">Prefiro atender com o Gabriel Ferreira</p>
                </li>
                <li class="barber" onclick="handleBarberClick('neqHWiSiMSoRS25p0D57')">
                    <h2>Sem PreferÃªncia</h2>
                    <img src="../img/img.jpg">
                    <p class="agendamento-descricao">Sem preferÃªncia de corte</p>
                </li>
            </ul>
        </div>


        <!-- modal de nÃ£o logado  -->
        <div id="loginModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <img src="../img/img.jpg" alt="Imagem da Barbearia" class="modal-image">
                <h2>ðŸšª Acesso Negado</h2>
                <p>VocÃª precisa estar logado para agendar um serviÃ§o. Por favor, faÃ§a login para continuar.</p>
                <button onclick="closeModal()" class="modal-button">Fechar</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="conteiner-footer">
            <!-- icons -->
            <div class="item">
                <div class="page">
                    <div class="logo">
                        <img src="../img/img.jpg" alt="Barbearia">
                    </div>
                    <div class="wrapper">
                        <a href="#" class="button">
                            <div class="icon">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                            <span>Facebook</span>
                        </a>
                        <a href="https://www.instagram.com/capitaobarbeiro/" class="button">
                            <div class="icon">
                                <i class="fab fa-instagram"></i>
                            </div>
                            <span>Instagram</span>
                        </a>
                        <a href="https://wa.me/5515997505420" class="button">
                            <div class="icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <span>Whatsapp</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- AvaliaÃ§Ã£o ServiÃ§os -->
            <div class="container-avali">
                <div class="app">
                    <h2 class="avaliacao">AvaliaÃ§Ã£o</h2>
                    <div class="rating">
                        <div class="rating__average">
                            <h1 id="average-rating">1.0</h1>
                            <div class="star-outer">
                                <div class="star-inner" id="star-rating">â˜…â˜…â˜…â˜…â˜…</div>
                            </div>
                            <p id="total-reviews">0</p>
                        </div>
                        <div class="rating__progress">
                            <div class="rating__progress-value">
                                <p>5 <span class="star">â˜…</span></p>
                                <div class="progress">
                                    <div class="bar" id="bar-5"></div>
                                </div>
                                <p id="reviews-5">0</p>
                            </div>
                            <div class="rating__progress-value">
                                <p>4 <span class="star">â˜…</span></p>
                                <div class="progress">
                                    <div class="bar" id="bar-4"></div>
                                </div>
                                <p id="reviews-4">0</p>
                            </div>
                            <div class="rating__progress-value">
                                <p>3 <span class="star">â˜…</span></p>
                                <div class="progress">
                                    <div class="bar" id="bar-3"></div>
                                </div>
                                <p id="reviews-3">0</p>
                            </div>
                            <div class="rating__progress-value">
                                <p>2 <span class="star">â˜…</span></p>
                                <div class="progress">
                                    <div class="bar" id="bar-2"></div>
                                </div>
                                <p id="reviews-2">0</p>
                            </div>
                            <div class="rating__progress-value">
                                <p>1 <span class="star">â˜…</span></p>
                                <div class="progress">
                                    <div class="bar" id="bar-1"></div>
                                </div>
                                <p id="reviews-1">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- AvaliaÃ§Ã£o por estrela -->
                <p class="Faca-avaliacao">FaÃ§a sua avaliaÃ§Ã£o:</p>
                <div class="star-rating-input">
                    <span class="star-input" data-value="1">&#9733;</span>
                    <span class="star-input" data-value="2">&#9733;</span>
                    <span class="star-input" data-value="3">&#9733;</span>
                    <span class="star-input" data-value="4">&#9733;</span>
                    <span class="star-input" data-value="5">&#9733;</span>
                </div>
            </div>
        </div>

        <script src="../script/avaliacao.js"></script>
    </footer>



    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>

    <script>

        let selectedBarberName = null;

        function exibirInfoUsuario(user) {
            const uid = user.uid;
            const db = firebase.firestore();

            db.collection("Usuarios").doc(uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        const nome = userData.nome || "Nome nÃ£o disponÃ­vel";

                        // Atualiza o conteÃºdo do <p> com o ID "user-name"
                        document.getElementById("user-name").innerText = nome;

                        // Armazena o nome na variÃ¡vel selectedBarberName
                        selectedBarberName = nome; // Armazena o nome na variÃ¡vel
                    } else {
                        document.getElementById("user-name").innerText = "UsuÃ¡rio nÃ£o encontrado";
                    }
                })
                .catch((error) => {
                    console.error("Erro ao buscar o nome do usuÃ¡rio:", error);
                    document.getElementById("user-name").innerText = "Erro ao buscar o nome";
                });
        }

        // ConfiguraÃ§Ã£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCviZ-ql0st4L0Ii3BTIg1xgin5IGJeBt0",
            authDomain: "capitaobarbeiro-5b7be.firebaseapp.com",
            projectId: "capitaobarbeiro-5b7be",
            storageBucket: "capitaobarbeiro-5b7be.appspot.com",
            messagingSenderId: "1013857162216",
            appId: "1:1013857162216:web:d3d74fa8be916691174a5d",
            measurementId: "G-DMR6NG64B3"
        };

        // Inicializando o Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

    </script>

    <script src="../script/Agendamento.js"></script>
</body>

</html>